blogdown:::serve_site()
blogdown:::new_post_addin()
# install.packages("ggplot2")
# load package and data
options(scipen=999)  # turn-off scientific notation like 1e+48
library(ggplot2)
theme_set(theme_bw())  # pre-set the bw theme.
data("midwest", package = "ggplot2")
# midwest <- read.csv("http://goo.gl/G1K41K")  # bkup data source
# Scatterplot
gg <- ggplot(midwest, aes(x=area, y=poptotal)) +
geom_point(aes(col=state, size=popdensity)) +
geom_smooth(method="loess", se=F) +
xlim(c(0, 0.1)) +
ylim(c(0, 500000)) +
labs(subtitle="Area Vs Population",
y="Population",
x="Area",
title="Scatterplot",
caption = "Source: midwest")
plot(gg)
# install.packages("ggplot2")
# load package and data
options(scipen=999)  # turn-off scientific notation like 1e+48
library(ggplot2)
theme_set(theme_bw())  # pre-set the bw theme.
data("midwest", package = "ggplot2")
# midwest <- read.csv("http://goo.gl/G1K41K")  # bkup data source
# Scatterplot
gg <- ggplot(midwest, aes(x=area, y=poptotal)) +
geom_point(aes(col=state, size=popdensity)) +
geom_smooth(method="loess", se=F) +
xlim(c(0, 0.1)) +
ylim(c(0, 500000)) +
labs(subtitle="Area Vs Population",
y="Population",
x="Area",
title="Scatterplot",
caption = "Source: midwest")
plot(gg)
blogdown:::new_post_addin()
library(DBI)
con <- dbConnect(RSQLite::SQLite(), dbname = '~/Documents/Jupyter/footballData.sqlite')
alltables <- dbListTables(con)
table <- dbGetQuery( con,'SELECT * from Formations' )
dbDisconnect(con)
table$possession_diff <- abs( table$home_possession_first - table$home_possession_second )
table$possession_diff_total <- abs( table$home_possession_total - table$away_possession_total )
table <- table[with(table, order(-possession_diff)), ]
table_reduced <- table[, c("league", "date", "home_team_name", "away_team_name", "possession_diff")]
season_from_date <- function(x){
year <- as.double(substring(x['date'], 3, 4))
month <- as.double(substring(x['date'], 6, 7))
if(month>7){
season <- paste(year,year+1, sep='/')
} else {
season <- paste(year-1,year, sep='/')
}
if(nchar(season) < 5) season <- paste('0', season, sep='')
return(season)
}
table$season <- apply(table, 1, season_from_date)
blogdown:::insert_image_addin()
library("DT")
library("tidyverse")
read_csv("/portfolio/2018-04-01-is-possession-data-getting-more-extreme_files/possession_differences.csv")
library(dplyr)
library(ggplot2)
table$extreme_possession <- as.numeric( abs( table$home_possession_total - table$away_possession_total ) > 0.4 )
grouped_1 <- group_by(table, league, season) %>%
summarise(extreme = mean(extreme_possession)) %>%
filter(league != "Europa_League")
grouped_1$league[grouped_1$league == "Champions_League"] <- "Champions League"
ggplot(grouped_1, aes(season, extreme, group = league, color = league)) +
geom_line(size = 1.2) +
scale_colour_brewer("Greens") +
scale_y_continuous(labels = scales::percent) +
labs(title = "Dispossessed",
subtitle = "Percentage of games with one-sided possession (above 70% for one team)") +
theme(plot.title = element_text(face = "bold", colour = "#3C3C3C", size = 16)) +
theme(plot.subtitle = element_text(size = 12)) +
theme(axis.title.y = element_blank()) +
theme(axis.title.x = element_blank()) +
theme(axis.text.x = element_text(size = 10)) +
theme(axis.text.y = element_text(size = 10)) +
theme(legend.justification = c(0, 1), legend.position = c(0.05, 1)) +
theme(legend.title = element_blank()) +
theme(legend.text = element_text(size = 11))
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
